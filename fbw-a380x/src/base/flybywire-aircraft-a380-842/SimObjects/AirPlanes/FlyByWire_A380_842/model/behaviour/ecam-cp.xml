<!-- Copyright (c) 2023-2024 FlyByWire Simulations -->
<!-- SPDX-License-Identifier: GPL-3.0 -->

<ModelBehaviors>
    <!--
    Template for rigging generic ECAM CP buttons

    Main Parameters:
            - NODE_ID           <no default>    Node-ID of the button

    Page State:
            - STATE_ID          <no default>    State of the simvar (L:A380X_ECAM_CP_SELECTED_PAGE_ID)

    ... or ...

    HTML Event:
            - HTML_EVENT        <no default>    HTML Event to send when clicked
    -->
    <Template Name="FBW_A380X_ECAM_CP_Button_Template">
        <DefaultTemplateParameters>
            <WWISE_EVENT_1>mcdubuttons</WWISE_EVENT_1>
            <WWISE_EVENT_2>mcdubuttons</WWISE_EVENT_2>
            <NORMALIZED_TIME_1>0.1</NORMALIZED_TIME_1>
            <NORMALIZED_TIME_2>0.5</NORMALIZED_TIME_2>

            <SEQ2_EMISSIVE_DRIVES_VISIBILITY>False</SEQ2_EMISSIVE_DRIVES_VISIBILITY>
            <SEQ2_CODE_DRIVES_VISIBILITY>False</SEQ2_CODE_DRIVES_VISIBILITY>

            <SEQ2_POWERED>(L:A32NX_ELEC_DC_ESS_BUS_IS_POWERED, Bool)</SEQ2_POWERED>

            <!-- Internal -->
            <STATE_SIMVAR>L:A380X_ECAM_CP_SELECTED_PAGE</STATE_SIMVAR>
        </DefaultTemplateParameters>

        <UseTemplate Name="ASOBO_GT_Push_Button_Airliner">
            <ANIM_NAME>#NODE_ID#</ANIM_NAME>

            <Condition Valid="HTML_EVENT">
                <True>
                    <LEFT_SINGLE_CODE>(&gt;H:A380X_RMP_BTN_#HTML_EVENT_ID#)</LEFT_SINGLE_CODE>
                </True>
                <False>
                    <LEFT_SINGLE_CODE>#STATE_ID# (&gt;#STATE_SIMVAR#)</LEFT_SINGLE_CODE>
                    <SEQ2_EMISSIVE_CODE>(#STATE_SIMVAR#) #STATE_ID# ==</SEQ2_EMISSIVE_CODE>
                </False>
            </Condition>

            <CURSOR>Hand</CURSOR>
        </UseTemplate>
    </Template>

    <Template Name="FBW_ECAM_BUTTON_SubTemplate">
        <DefaultTemplateParameters>
            <NODE_ID>PUSH_ECAM_#BASE_NAME#</NODE_ID>
            <ANIM_NAME_BUTTON>PUSH_ECAM_#BASE_NAME#</ANIM_NAME_BUTTON>
            <BACKLIGHT_NODE_ID>PUSH_ECAM_#BASE_NAME#_SEQ1</BACKLIGHT_NODE_ID>
            <WWISE_EVENT_1>mcdubuttons</WWISE_EVENT_1>
            <NORMALIZED_TIME_1>0.1</NORMALIZED_TIME_1>
            <WWISE_EVENT_2>mcdubuttons</WWISE_EVENT_2>
            <NORMALIZED_TIME_2>0.5</NORMALIZED_TIME_2>
            <SEQ2_POWERED>1</SEQ2_POWERED>
        </DefaultTemplateParameters>

        <Component ID="#NODE_ID#" Node="#NODE_ID#">
            <UseTemplate Name="ASOBO_GT_Push_Button_Held">
                <ANIM_NAME>#ANIM_NAME_BUTTON#</ANIM_NAME>
                <Condition NotEmpty="SIMVAR">
                    <True>
                        <LEFT_SINGLE_CODE>
                            1 (&gt;L:#SIMVAR#)
                        </LEFT_SINGLE_CODE>
                        <LEFT_LEAVE_CODE>
                            0 (&gt;L:#SIMVAR#)
                        </LEFT_LEAVE_CODE>
                    </True>
                    <False>
                        <LEFT_SINGLE_CODE>
                            1 (&gt;L:A32NX_BTN_#BASE_NAME#)
                        </LEFT_SINGLE_CODE>
                        <LEFT_LEAVE_CODE>
                            0 (&gt;L:A32NX_BTN_#BASE_NAME#)
                        </LEFT_LEAVE_CODE>
                    </False>
                </Condition>
            </UseTemplate>
        </Component>

        <Condition Check="POTENTIOMETER">
            <True>
                <Component ID="#BACKLIGHT_NODE_ID#" Node="#BACKLIGHT_NODE_ID#">
                    <UseTemplate Name="ASOBO_GT_Emissive_Potentiometer">
                        <EMISSIVE_CODE>#SEQ2_POWERED#</EMISSIVE_CODE>
                    </UseTemplate>
                </Component>
            </True>
        </Condition>
    </Template>

    <Template Name="FBW_ECAM_BUTTON_Template">
        <DefaultTemplateParameters>
            <BASE_NAME>UNKNOWN</BASE_NAME>
            <GROUP_INDEX>-1</GROUP_INDEX>
        </DefaultTemplateParameters>

        <UseTemplate Name="FBW_ECAM_BUTTON_SubTemplate">
        </UseTemplate>
    </Template>

    <Template Name="A32NX_ECAM_CLR_BUTTON_Template">
        <DefaultTemplateParameters>
            <BASE_NAME>UNKNOWN</BASE_NAME>
            <NODE_ID>PUSH_ECAM_#BASE_NAME#</NODE_ID>
            <ANIM_NAME_BUTTON>PUSH_ECAM_#BASE_NAME#</ANIM_NAME_BUTTON>
            <LED_NODE_ID>PUSH_ECAM_#BASE_NAME#_SEQ2</LED_NODE_ID>
            <BACKLIGHT_NODE_ID>PUSH_ECAM_#BASE_NAME#_SEQ1</BACKLIGHT_NODE_ID>
            <WWISE_EVENT_1>mcdubuttons</WWISE_EVENT_1>
            <NORMALIZED_TIME_1>0.1</NORMALIZED_TIME_1>
            <WWISE_EVENT_2>mcdubuttons</WWISE_EVENT_2>
            <NORMALIZED_TIME_2>0.5</NORMALIZED_TIME_2>
            <SEQ1_POWERED>1</SEQ1_POWERED>
            <SEQ2_POWERED>1</SEQ2_POWERED>
        </DefaultTemplateParameters>

        <Component ID="#NODE_ID#" Node="#NODE_ID#">
            <UseTemplate Name="ASOBO_GT_Push_Button_Held">
                <ANIM_NAME>#ANIM_NAME_BUTTON#</ANIM_NAME>
                <LEFT_SINGLE_CODE>
                    1 (&gt;L:#SIMVAR#)
                </LEFT_SINGLE_CODE>
                <LEFT_LEAVE_CODE>
                    0 (&gt;L:#SIMVAR#)
                </LEFT_LEAVE_CODE>
            </UseTemplate>
        </Component>


        <Component ID="#LED_NODE_ID#" Node="#LED_NODE_ID#">
            <UseTemplate Name="ASOBO_GT_Emissive_Gauge">
                <EMISSIVE_CODE>
                (L:A32NX_ECAM_SFAIL) -1 &gt;
                (L:A32NX_OVHD_INTLT_ANN) 0 == (L:A32NX_ELEC_DC_ESS_BUS_IS_POWERED, Bool) and or
                #SEQ1_POWERED# and
                </EMISSIVE_CODE>
            </UseTemplate>
        </Component>

        <Condition Check="POTENTIOMETER">
            <True>
                <Component ID="#BACKLIGHT_NODE_ID#" Node="#BACKLIGHT_NODE_ID#">
                    <UseTemplate Name="ASOBO_GT_Emissive_Potentiometer">
                        <EMISSIVE_CODE>#SEQ2_POWERED#</EMISSIVE_CODE>
                    </UseTemplate>
                </Component>
            </True>
        </Condition>
    </Template>

    <Template Name="FBW_A380X_Components_ECAM_CP">
        <!-- ECAM T.O CONFIG -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_ECAM_BUTTON_Template</ANIM_TEMPLATE>
            <BASE_NAME>TOCONF</BASE_NAME>
            <PART_ID>ECAM_TOCFG</PART_ID>
            <TOOLTIPID>Test T.O CONFIG</TOOLTIPID>
            <SIMVAR>A32NX_BTN_TOCONFIG</SIMVAR>
        </UseTemplate>

        <!-- ECAM CLR -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>A32NX_ECAM_CLR_BUTTON_Template</ANIM_TEMPLATE>
            <BASE_NAME>CLR_LH</BASE_NAME>
            <PART_ID>ECAM_CLR</PART_ID>
            <TOOLTIPID>Clear ECAM messages</TOOLTIPID>
            <SIMVAR>A32NX_BTN_CLR</SIMVAR>
        </UseTemplate>

        <!-- ECAM CLR -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>A32NX_ECAM_CLR_BUTTON_Template</ANIM_TEMPLATE>
            <BASE_NAME>CLR_RH</BASE_NAME>
            <PART_ID>ECAM_CLR2</PART_ID>
            <TOOLTIPID>Clear ECAM messages</TOOLTIPID>
            <SIMVAR>A32NX_BTN_CLR2</SIMVAR>
        </UseTemplate>

        <!-- ECAM RCL -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_ECAM_BUTTON_Template</ANIM_TEMPLATE>
            <BASE_NAME>RCLLAST</BASE_NAME>
            <PART_ID>ECAM_RCL</PART_ID>
            <TOOLTIPID>Recall ECAM messages</TOOLTIPID>
            <SIMVAR>A32NX_BTN_RCL</SIMVAR>
        </UseTemplate>

        <!-- SD ENG -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_ENG</NODE_ID>
            <STATE_ID>0</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT ENGINE PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD BLEED -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_BLEED</NODE_ID>
            <STATE_ID>1</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT BLEED PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD PRESS -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_PRESS</NODE_ID>
            <STATE_ID>2</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT CAB PRESS PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD EL/AC -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_ELAC</NODE_ID>
            <STATE_ID>3</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT ELEC AC PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD FUEL -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_FUEL</NODE_ID>
            <STATE_ID>4</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT FUEL PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD HYD -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_HYD</NODE_ID>
            <STATE_ID>5</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT HYD PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- TODO CB REPSOL -->

        <!-- SD APU -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_APU</NODE_ID>
            <STATE_ID>7</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT APU PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD COND -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_COND</NODE_ID>
            <STATE_ID>8</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT COND PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD DOOR -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_DOOR</NODE_ID>
            <STATE_ID>9</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT DOOR - OXYGEN PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD EL/DC -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_ELDC</NODE_ID>
            <STATE_ID>10</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT ELEC EC PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD WHEEL -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_WHEEL</NODE_ID>
            <STATE_ID>11</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT WHEEL PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD F/CTL -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_FCTL</NODE_ID>
            <STATE_ID>12</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT F/CTL PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- SD VIDEO -->
        <UseTemplate Name="FBW_Anim_Interactions">
            <NODE_ID>PUSH_ECAM_VIDEO</NODE_ID>
            <STATE_ID>13</STATE_ID>

            <ANIM_TYPE>BUTTON</ANIM_TYPE>
            <ANIM_TEMPLATE>FBW_A380X_ECAM_CP_Button_Template</ANIM_TEMPLATE>

            <TOOLTIPID>SELECT VIDEO PAGE ON SYSTEM DISPLAY</TOOLTIPID>
        </UseTemplate>

        <!-- TODO ALL HOLLAND -->
        <!-- TODO CLR HOLLAND -->
        <!-- TODO RCL LAST REPSOL -->
        <!-- TODO STS HOLLAND -->
        <!-- TODO MORE REPSOL -->
        <!-- TODO RCL HOLLAND -->
        <!-- TODO CLEAR HOLLAND -->

        <!-- EWD POTENTIOMETER -->
        <UseTemplate Name="FBW_Stepless_Potentiometer">
            <NODE_ID>KNOB_EFIS_EWD</NODE_ID> <!-- TODO TYPO REPSOL -->
            <ANIMTIP_0>TT:COCKPIT.TOOLTIPS.LIGHTING_KNOB_EWD_DECREASE</ANIMTIP_0>
            <ANIMTIP_1>TT:COCKPIT.TOOLTIPS.LIGHTING_KNOB_EWD_INCREASE</ANIMTIP_1>
            <POTENTIOMETER>92</POTENTIOMETER>
        </UseTemplate>

        <!-- KNOB SD -->
        <UseTemplate Name="FBW_Stepless_Potentiometer">
            <NODE_ID>KNOB_EFIS_SD</NODE_ID> <!-- TODO TYPO REPSOL -->
            <ANIMTIP_0>TT:COCKPIT.TOOLTIPS.LIGHTING_KNOB_SD_DECREASE</ANIMTIP_0>
            <ANIMTIP_1>TT:COCKPIT.TOOLTIPS.LIGHTING_KNOB_SD_INCREASE</ANIMTIP_1>
            <POTENTIOMETER>93</POTENTIOMETER>
        </UseTemplate>
    </Template>
</ModelBehaviors>
